<script>
    // Goal presets mapping - map backend preset names to goals
    // Use window object to prevent redeclaration errors when HTMX swaps content
    window.GOAL_PRESETS = window.GOAL_PRESETS || {
        'Conservative': 'Conservative swing trades with high probability of success - focus on quality over quantity',
        'Moderate': 'Buy low, sell high - find oversold stocks ready to bounce back up',
        'Aggressive': 'Aggressive swing trading - maximize opportunities with higher risk tolerance',
        'Custom': ''
    };
    
    // Update goal from preset selection
    function updateGoalFromPreset(select) {
        const preset = select.value; // This will be 'Moderate' for Balanced, etc.
        const goalInput = document.getElementById('strategy-goal');
        if (goalInput && window.GOAL_PRESETS[preset]) {
            goalInput.value = window.GOAL_PRESETS[preset];
        }
    }
    
    // Make updateGoalFromPreset globally available
    window.updateGoalFromPreset = updateGoalFromPreset;
    
    // Initialize icons on load
    (function() {
        // Refresh lucide icons for tooltips and buttons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        // Re-initialize icons after a short delay to ensure DOM is ready
        setTimeout(() => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }, 100);
    })();
    
    // HTMX Gold Standard: Form submission handled by HTMX, no fetch() needed
    // The form uses hx-post="/api/strategy" and handles success/error via HTMX events
    // Loading state is handled by hx-indicator on the submit button
</script>
