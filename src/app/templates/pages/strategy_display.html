<div class="glass rounded-xl p-4 border {{ border_class }}" role="region" aria-label="Strategy configuration">
    <div class="mb-3">
        <div class="text-xs text-gray-400 mb-1 uppercase tracking-wider">Strategy</div>
        <h3 class="text-lg font-bold text-white">{{ name|e }}</h3>
    </div>
    {% if goal %}
    <div class="mb-3 p-3 bg-purple-500/10 border border-purple-500/30 rounded-lg">
        <div class="text-xs text-purple-300 mb-1 font-semibold flex items-center gap-1.5">
            <i data-lucide="target" class="w-3 h-3"></i>
            Goal
        </div>
        <p class="text-sm text-white">{{ goal|e }}</p>
    </div>
    {% endif %}
    <p class="text-xs text-gray-400 mb-3">Buy Low: Enter when stocks are oversold (RSI &lt; {{ rsi_threshold }}) with strong bounce-back signals.<br>Sell High: Exit at profit targets (entry + 3 ATR) or risk limits (entry - 2 ATR).</p>
    <div class="grid grid-cols-2 gap-3 text-xs mb-3" role="list" aria-label="Strategy parameters">
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">RSI Threshold</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about RSI threshold" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>RSI Threshold</strong><br/>
                        Maximum RSI value for entry signals. Only stocks with RSI below this are considered "oversold" and eligible to buy.<br/><br/>
                        <strong>How it works:</strong> RSI &lt; {{ rsi_threshold }} means we only buy when stock is oversold (below {{ rsi_threshold }}).<br/><br/>
                        <strong>Effect:</strong> Lower = fewer signals (more conservative), Higher = more signals (more aggressive)
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="RSI threshold: less than {{ rsi_threshold }}">&lt; {{ rsi_threshold }}</div>
            <div class="text-gray-500 text-[10px] mt-1">On Sale (oversold)</div>
        </div>
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">RSI Minimum</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about RSI minimum" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>RSI Minimum</strong><br/>
                        Minimum RSI value to avoid extreme oversold conditions. Filters out stocks that are too beaten down, which may indicate fundamental issues.<br/><br/>
                        <strong>How it works:</strong> RSI &gt; {{ rsi_min }} means we avoid stocks that are extremely oversold (below {{ rsi_min }}).<br/><br/>
                        <strong>Effect:</strong> Prevents buying stocks that are too beaten down (may have real problems)
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="RSI minimum: greater than {{ rsi_min }}">&gt; {{ rsi_min }}</div>
            <div class="text-gray-500 text-[10px] mt-1">Avoid extreme oversold</div>
        </div>
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">SMA-200 Proximity</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about SMA-200 proximity" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>SMA-200 Proximity</strong><br/>
                        Maximum percentage above SMA-200 for entry. Stocks must be near support (0-5%). Lower = closer to support (more conservative), Higher = further from support (more opportunities)<br/><br/>
                        <strong>How it works:</strong> Price must be within {{ sma_proximity_pct }}% above the 200-day moving average. This ensures we're buying near support levels, which increases bounce-back probability.<br/><br/>
                        <strong>Effect:</strong> Lower = closer to support (more conservative, fewer signals), Higher = further from support (more opportunities but less near support)
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="SMA-200 proximity: less than or equal to {{ sma_proximity_pct }}%">≤ {{ sma_proximity_pct }}%</div>
            <div class="text-gray-500 text-[10px] mt-1">Near support level</div>
        </div>
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">AI Score Required</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about AI score requirement" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>AI Score Required</strong><br/>
                        Minimum AI confidence score (0-10) required for entry. AI analyzes news, technicals, and patterns to score bounce-back probability.<br/><br/>
                        <strong>How it works:</strong> Score ≥ {{ ai_score_required }} means we only buy when AI is confident about bounce potential.<br/><br/>
                        <strong>Effect:</strong> Higher = fewer but higher quality signals, Lower = more signals but lower confidence
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="AI score required: greater than or equal to {{ ai_score_required }}">≥ {{ ai_score_required }}</div>
            <div class="text-gray-500 text-[10px] mt-1">Bounce-back confidence</div>
        </div>
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">Risk/Reward</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about risk reward ratio" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>Risk/Reward Ratio (3:1)</strong><br/>
                        Informational ratio showing potential profit vs risk. This is <strong>not configurable</strong> - it's calculated from the strategy's stop loss and take profit rules.<br/><br/>
                        <strong>How it works:</strong> Stop loss is 2×ATR below entry, take profit is 3×ATR above entry. This creates a 3:1 reward-to-risk ratio.<br/><br/>
                        <strong>Example:</strong> Risk $1 to potentially make $1.50 (3:1 ratio)
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="Risk reward ratio: 3 to 1">3:1</div>
            <div class="text-gray-500 text-[10px] mt-1">Reward-to-risk ratio (info only)</div>
        </div>
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">Risk Per Trade</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about risk per trade" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>Risk Per Trade</strong><br/>
                        Dollar amount you're willing to risk if stop loss is hit. This determines position size based on volatility.<br/><br/>
                        <strong>How it works:</strong> Position size = risk_amount / (2 × ATR). The stop loss is set at 2×ATR below entry, so if it hits, you lose exactly this amount.<br/><br/>
                        <strong>Example:</strong> $50 risk with $2 ATR = 25 shares. If stop loss hits, you lose $50.<br/><br/>
                        <strong>Effect:</strong> Higher = larger positions, Lower = smaller positions
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="Risk per trade: ${{ risk_per_trade|round(0)|int }}">${{ risk_per_trade|round(0)|int }}</div>
            <div class="text-gray-500 text-[10px] mt-1">Dollar risk if stop loss hits</div>
        </div>
        <div class="glass rounded-lg p-2" role="listitem">
            <div class="flex items-center gap-1 mb-1">
                <div class="text-gray-400">Max Capital</div>
                <div class="tooltip">
                    <button type="button" aria-label="Learn about max capital" class="focus:ring-2 focus:ring-blue-500/50 rounded">
                        <i data-lucide="info" class="w-3 h-3 text-blue-400 cursor-help"></i>
                    </button>
                    <div class="tooltip-text">
                        <strong>Max Capital</strong><br/>
                        Maximum total capital to deploy across all positions. This caps position size to prevent over-allocation.<br/><br/>
                        <strong>How it works:</strong> Max shares = min(buying_power, max_capital) / price. This limits total exposure across all positions.{% if max_capital_note %} {{ max_capital_note|e }}{% endif %}<br/><br/>
                        <strong>Example:</strong> $5,000 max capital with $100 stock = max 50 shares per position.<br/><br/>
                        <strong>Effect:</strong> Limits total exposure, prevents over-allocation
                    </div>
                </div>
            </div>
            <div class="text-white font-bold" aria-label="Max capital: ${{ max_capital|round(0)|int }}">${{ max_capital|round(0)|int|string|replace(',', '') }}</div>
            <div class="text-gray-500 text-[10px] mt-1">Total capital limit{% if max_capital_note %} {{ max_capital_note|e }}{% endif %}</div>
        </div>
    </div>
</div>
